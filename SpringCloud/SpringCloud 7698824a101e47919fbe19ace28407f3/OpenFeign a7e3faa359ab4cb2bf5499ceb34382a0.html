<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">



<title>Yee Van</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Yee&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">帖子</a>
                
                    <a class="menu-item" href="/category">类别</a>
                
                    <a class="menu-item" href="/tag">标签</a>
                
                    <a class="menu-item" href="/resume/index.html">关于</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Yee&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">帖子</a>
                
                    <a class="menu-item" href="/category">类别</a>
                
                    <a class="menu-item" href="/tag">标签</a>
                
                    <a class="menu-item" href="/resume/index.html">关于</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    <article class="post-wrap page">
        
        <h2 class="post-title"></h2>
        
        <section class="post-content">
            <html><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>OpenFeign</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(96, 96, 98, 0.93);
	fill: rgba(96, 96, 98, 0.93);
}
.highlight-brown {
	color: rgba(174, 102, 29, 1);
	fill: rgba(174, 102, 29, 1);
}
.highlight-orange {
	color: rgba(210, 82, 22, 1);
	fill: rgba(210, 82, 22, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(62, 143, 53, 1);
	fill: rgba(62, 143, 53, 1);
}
.highlight-blue {
	color: rgba(33, 131, 190, 1);
	fill: rgba(33, 131, 190, 1);
}
.highlight-purple {
	color: rgba(151, 93, 190, 1);
	fill: rgba(151, 93, 190, 1);
}
.highlight-pink {
	color: rgba(203, 62, 132, 1);
	fill: rgba(203, 62, 132, 1);
}
.highlight-red {
	color: rgba(208, 60, 60, 1);
	fill: rgba(208, 60, 60, 1);
}
.highlight-gray_background {
	background: rgba(234, 234, 235, 0.93);
}
.highlight-brown_background {
	background: rgba(213, 130, 38, 0.13);
}
.highlight-orange_background {
	background: rgba(252, 103, 27, 0.13);
}
.highlight-yellow_background {
	background: rgba(253, 183, 63, 0.13);
}
.highlight-teal_background {
	background: rgba(76, 169, 66, 0.13);
}
.highlight-blue_background {
	background: rgba(45, 159, 226, 0.13);
}
.highlight-purple_background {
	background: rgba(187, 123, 230, 0.13);
}
.highlight-pink_background {
	background: rgba(255, 85, 163, 0.13);
}
.highlight-red_background {
	background: rgba(255, 82, 71, 0.13);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(96, 96, 98, 0.93);
	fill: rgba(96, 96, 98, 0.93);
}
.block-color-brown {
	color: rgba(174, 102, 29, 1);
	fill: rgba(174, 102, 29, 1);
}
.block-color-orange {
	color: rgba(210, 82, 22, 1);
	fill: rgba(210, 82, 22, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(62, 143, 53, 1);
	fill: rgba(62, 143, 53, 1);
}
.block-color-blue {
	color: rgba(33, 131, 190, 1);
	fill: rgba(33, 131, 190, 1);
}
.block-color-purple {
	color: rgba(151, 93, 190, 1);
	fill: rgba(151, 93, 190, 1);
}
.block-color-pink {
	color: rgba(203, 62, 132, 1);
	fill: rgba(203, 62, 132, 1);
}
.block-color-red {
	color: rgba(208, 60, 60, 1);
	fill: rgba(208, 60, 60, 1);
}
.block-color-gray_background {
	background: rgba(234, 234, 235, 0.93);
}
.block-color-brown_background {
	background: rgba(213, 130, 38, 0.13);
}
.block-color-orange_background {
	background: rgba(252, 103, 27, 0.13);
}
.block-color-yellow_background {
	background: rgba(253, 183, 63, 0.13);
}
.block-color-teal_background {
	background: rgba(76, 169, 66, 0.13);
}
.block-color-blue_background {
	background: rgba(45, 159, 226, 0.13);
}
.block-color-purple_background {
	background: rgba(187, 123, 230, 0.13);
}
.block-color-pink_background {
	background: rgba(255, 85, 163, 0.13);
}
.block-color-red_background {
	background: rgba(255, 82, 71, 0.13);
}
.select-value-color-gray { background-color: rgba(234, 234, 235, 0.93); }
.select-value-color-brown { background-color: rgba(213, 130, 38, 0.13); }
.select-value-color-orange { background-color: rgba(252, 103, 27, 0.13); }
.select-value-color-yellow { background-color: rgba(253, 183, 63, 0.13); }
.select-value-color-green { background-color: rgba(76, 169, 66, 0.13); }
.select-value-color-blue { background-color: rgba(45, 159, 226, 0.13); }
.select-value-color-purple { background-color: rgba(187, 123, 230, 0.13); }
.select-value-color-pink { background-color: rgba(255, 85, 163, 0.13); }
.select-value-color-red { background-color: rgba(255, 82, 71, 0.13); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style><link rel="alternate" href="/atom.xml" title="Yee Van" type="application/atom+xml">
</head><body><article id="a7e3faa3-59ab-4cb2-bf54-99ceb34382a0" class="page sans"><header><img class="page-cover-image" src="https://www.notion.so/images/page-cover/met_william_morris_1877_willow.jpg" style="object-position:center 90%"><div class="page-header-icon page-header-icon-with-cover"><img class="icon" src="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/greenSpring.png"></div><h1 class="page-title">OpenFeign</h1></header><div class="page-body"><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="c28984bd-d5ea-485c-bd88-b966e8fdc31c"><div style="font-size:1.5em"><span class="icon">📌</span></div><div style="width:100%">OpenFeign 底层集成了Ribbon,实现负载均衡！</div></figure><h3 id="a6c0f412-7209-49f2-8988-a6f5a7d1f181" class>OpenFeign的使用</h3><blockquote id="22d879d9-44eb-409d-94f6-0d1f00db7f2b" class>举例：商品类别调用商品服务</blockquote><figure id="5d99b672-77f8-46ab-84e3-baeeabaeacbc" class="image"><a href="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled.png"><img style="width:957px" src="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled.png"></a></figure><ul id="e520690d-c260-4239-83db-f74606fd6ce8" class="toggle"><li><details open><summary>1.在服务端（<strong>Category</strong>）调用方引入OpenFeign依赖</summary><pre id="e2586c47-f1ed-428b-90f1-de25ed679af9" class="code"><code>&lt;!--引入openfeign--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;
        &lt;/dependency&gt;</code></pre><p id="24a259f1-34e5-458c-8c37-e47fc6e97218" class>
</p></details></li></ul><ul id="7a2d2af9-dece-4c11-855a-63ab3638855d" class="toggle"><li><details open><summary>2.在服务调用方入口类添加注解<strong><mark class="highlight-teal">@EnableFeignClients</mark></strong> 开启openFeign客户端调用</summary><pre id="56469090-3ff0-4baa-8636-3ecf1d183e76" class="code"><code>@SpringBootApplication
@EnableDiscoveryClient
@EnableFeignClients   //开启openFeign客户端调用
public class CategoryApplication {

    public static void main(String[] args) {
        SpringApplication.run(CategoryApplication.class,args);
    }
}</code></pre></details></li></ul><ul id="696efef6-7f29-4fca-b3aa-618cd0898265" class="toggle"><li><details open><summary>3.开发客户端接口</summary><ul id="132be66b-55cf-4b95-8330-f3310efec0a7" class="toggle"><li><details open><summary>1.新建feignClients包</summary><figure id="eb8f3b0e-72ca-4f96-b75b-9bf826d63ccc" class="image"><a href="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled%201.png"><img style="width:324px" src="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled%201.png"></a></figure></details></li></ul><ul id="9efa7137-98d1-4ad4-8b31-a9db1af06e8e" class="toggle"><li><details open><summary>2.新建ProductClient接口</summary><pre id="a3096d3e-d243-45f6-9e43-e4b48abe5284" class="code"><code>@FeignClient(&quot;PRODUCT&quot;)   //  value： 书写调用服务的id  此处调用PRODUCT
public interface ProductClient {
//  调用商品服务
    @GetMapping(&quot;/product&quot;)
    public String product();
}</code></pre><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="0effb223-408e-48f9-83ef-82d84fc6bace"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">调用商品服务的方法与<mark class="highlight-red"><strong>ProductController</strong></mark>中<strong>保持一致</strong>
 @<mark class="highlight-red">GetMapping</mark>(&quot;<mark class="highlight-teal">/product</mark>&quot;)
  <mark class="highlight-blue">public</mark> String <mark class="highlight-red">product</mark>();</div></figure><p id="165ad418-a84b-4f7b-8535-86b896d53c36" class><mark class="highlight-red"><strong>ProductController</strong></mark></p><pre id="2ef51d7b-7007-445f-8687-920b876306a7" class="code"><code>@RestController
public class ProductController {
    @Value(&quot;${server.port}&quot;)
    private int port;

    @GetMapping(&quot;/product&quot;)
    public String product() {
        log.println(&quot;Enter Product Server...&quot;);
        return &quot;Product ok!!!  -----&gt;   Product-Port : &quot;+port;
    }
}</code></pre></details></li></ul><ul id="f0bf3ae2-f741-4101-a7fb-74a077d45285" class="toggle"><li><details open><summary>3.调用Product服务</summary><pre id="e09b2efa-15bf-4719-b37b-e23455611030" class="code"><code>@RestController
public class CatagoryController {

    @Value(&quot;${server.port}&quot;)
    private int port;

    @Autowired
    private ProductClient productClient;

    @GetMapping(&quot;/category&quot;)
    public String Catagory() {
        log.println(&quot;Enter Catagory Server...&quot;);
        String product = productClient.product();
        return &quot;Catagory ok!!!   -----&gt;   Catagory-Port : &quot;+port+&quot;&lt;hr/&gt; 调用到的product：&lt;br/&gt;&quot;+product;
    }
}</code></pre><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="e5c00fd8-1112-4f7b-874b-272fe8efb208"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">注入
<mark class="highlight-gray">@Autowired</mark>
 <mark class="highlight-blue">private</mark> <mark class="highlight-red">ProductClient</mark> productClient;
调用：
 <mark class="highlight-red">String</mark> product = productClient.<mark class="highlight-red">product</mark>();</div></figure><p id="66fbdcd8-8d5b-418a-b3c7-2c2f28e4c850" class>
</p><p id="5e70a94d-4587-410a-98ae-8cfc2a6dc8ac" class>
</p></details></li></ul><ul id="a6066f52-923a-44f9-9f37-cc1e0d0229ea" class="toggle"><li><details open><summary>4.实现负载均衡效果</summary><figure id="c96ad388-9d06-49a2-8b2a-559f63b0807a" class="image"><a href="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled%202.png"><img style="width:383px" src="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled%202.png"></a></figure><figure id="1d4c983d-7dc3-45f3-9cbd-5df3d69c3b34" class="image"><a href="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled%203.png"><img style="width:353px" src="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled%203.png"></a></figure><p id="2b2f1a6c-6f33-4328-a1b8-66e87854c6e0" class>
</p></details></li></ul></details></li></ul><h3 id="eac3375e-cb70-45ff-82ad-3f1a45e57417" class>参数传递</h3><ul id="4d8bc61a-0704-481a-bbb7-1f9326822d37" class="toggle"><li><details open><summary>1.传递零散类型参数</summary><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="ae8c2411-010f-46c2-99e5-a27dcb5acb16"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">在OpenFeign接口声明中，必须给参数加入注解，且注解参数不可为空！！！
queryString方式使用：<strong><mark class="highlight-red">@RequestParam</mark></strong>
路径传递参数使用：<strong><mark class="highlight-red">@PathVariable</mark></strong></div></figure><ul id="85b883cb-3827-40eb-ba7d-d544e4c770a9" class="toggle"><li><details open><summary>queryString方式传递参数</summary><p id="7ba48cbb-08df-451c-964a-a4b399276c64" class>1.在<mark class="highlight-red"><strong>ProductController</strong></mark>中定义方法</p><pre id="95b08a89-d2f9-47c5-ae5f-332dfdde8a7a" class="code"><code>//    queryString方式传递参数
    @GetMapping(&quot;/param&quot;)
    public String param(@RequestParam(&quot;name&quot;) String name, @RequestParam(&quot;age&quot;) Integer age){
        System.out.println(&quot;queryString方式传递参数&quot;);
        return &quot;Name:&quot;+name+&quot;&amp;&amp; Age:&quot;+age;
    }</code></pre><p id="2b96718a-a824-40fe-b78d-5c1db9fc8bc0" class>2.在<mark class="highlight-red"><strong>ProductClient</strong></mark>接口中定义方法</p><pre id="c1150f6d-e8b6-47a7-8eda-0c63944992c7" class="code"><code>//    queryString方式传递参数
    @GetMapping(&quot;/param&quot;)
    String param(@RequestParam(&quot;name&quot;) String name, @RequestParam(&quot;age&quot;) Integer age);</code></pre><p id="8ae148ad-0912-4553-a9e4-78c2e2b2bff1" class>3.在<strong>CategoryController</strong>中调用Product服务</p><pre id="1bc5cb2e-5666-498f-808b-00fa95b60391" class="code"><code>@GetMapping(&quot;/param&quot;)
    public String param() {
        log.println(&quot;Enter param Server...&quot;);
        String tom = productClient.param(&quot;Tom&quot;, 18);
        System.out.println(tom);
        return &quot;Port : &quot;+port+&quot;&lt;hr/&gt; 调用到的：&lt;br/&gt;&quot;+tom;
    }</code></pre><p id="edb239d1-1da6-4170-8858-f1cc7d824d3c" class>
</p></details></li></ul><ul id="23180a6a-fe2b-468a-87f1-6250a14749f0" class="toggle"><li><details open><summary>路径传递参数</summary><p id="3e3dc4d4-5ac5-4abb-8c1f-96879991eb31" class>1.在<mark class="highlight-red"><strong>ProductController</strong></mark>中定义方法</p><pre id="bbe2f301-c49e-421a-8cc8-47d2f9218b68" class="code"><code>//    路径方式传递参数
    @GetMapping(&quot;/PathVariable/{name}/{age}&quot;)
    public String PathVariable(@PathVariable(&quot;name&quot;) String name, @PathVariable(&quot;age&quot;) Integer age){
        System.out.println(&quot;路径方式传递参数&quot;);
        return &quot;Name:&quot;+name+&quot;&amp;&amp; Age:&quot;+age;
    }</code></pre><p id="f6db0a23-8bb1-451e-9678-5f8bc8132d52" class>2.在<mark class="highlight-red"><strong>ProductClient</strong></mark>接口中定义方法</p><pre id="fa4578bd-4a8b-4cb4-a2f6-bbff21b8e4bc" class="code"><code>//    路径方式传递参数
    @GetMapping(&quot;/PathVariable/{name}/{age}&quot;)
    String PathVariable(@PathVariable(&quot;name&quot;) String name, @PathVariable(&quot;age&quot;) Integer age);</code></pre><p id="720b4349-0ca7-4546-94d4-60b8b86c34c3" class>3.在<strong>CategoryController</strong>中调用Product服务</p><pre id="48a814d5-8e5a-4bab-984e-1d1aaba12535" class="code"><code>@GetMapping(&quot;/path&quot;)
    public String path() {
        log.println(&quot;Enter path &quot;);
        String tom = productClient.PathVariable(&quot;Tom&quot;, 18);
        System.out.println(tom);
        return &quot;&lt;h1&gt;PathVariable&lt;/h1&gt; Port : &quot;+port+&quot;&lt;hr/&gt; 调用到的：&lt;br/&gt;&quot;+tom;
    }</code></pre></details></li></ul></details></li></ul><ul id="4e4573b1-923b-41e9-a739-d1b115f3e66b" class="toggle"><li><details open><summary>2.传递对象类型参数</summary><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="a77955fa-0bf6-4757-84c8-b4ee4b814b21"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">使用 <mark class="highlight-red"><strong>@RequestBody</strong></mark> 注解 将对象转为json数据</div></figure><p id="ba38efea-cbdf-436e-8a54-4ce8f699cb30" class>1.在<mark class="highlight-red"><strong>ProductController</strong></mark>中定义方法</p><pre id="b6011a2b-a0d0-4249-b160-1fdb452320ab" class="code"><code>//    传对象
    @PostMapping(&quot;/Product&quot;)
    public String postProduct(@RequestBody Product product){
        System.out.println(product);
        return &quot;Product：&quot;+product;
    }</code></pre><p id="b88c5713-9824-4897-a7d9-942151e812ec" class>2.在<mark class="highlight-red"><strong>ProductClient</strong></mark>接口中定义方法</p><pre id="611a7f5c-fce8-4958-a61c-a4e3285911d2" class="code"><code>//    传对象
    @PostMapping(&quot;/Product&quot;)
    String postProduct(@RequestBody Product product);</code></pre><p id="2f1717e1-936f-4ad7-a7e2-3589cf9ffc71" class>3.在<strong>CategoryController</strong>中调用Product服务</p><pre id="9422c221-f810-4869-836f-872482373db5" class="code"><code>@RequestMapping(&quot;/product&quot;)
    public String product() {
        String product = productClient.postProduct(new Product(&quot;🐈&quot;, 22, null));
        return &quot;结果：&lt;br/&gt;&quot;+product;
    }</code></pre><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="119c941c-29d1-4f91-a252-f43653e7ef77"><div style="font-size:1.5em"><span class="icon">❓</span></div><div style="width:100%"><mark class="highlight-red"><strong>遇到的问题：</strong></mark>@PostMapping要改成@RequestMapping才不报错？ 原因尚未知晓！！！
⚠️ <mark class="highlight-red"><strong>报错信息：</strong></mark>
<code><mark class="highlight-red">org.springframework.web.HttpRequestMethodNotSupportedException: Request method &#x27;GET&#x27; not supported</mark></code></div></figure><figure id="6cb8fd03-c1e1-4348-a915-ded4487afac3" class="image"><a href="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled%204.png"><img style="width:503px" src="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled%204.png"></a></figure></details></li></ul><ul id="285ec5cf-4eea-43fa-a2c6-f8e73b60d39e" class="toggle"><li><details open><summary>3.传递数组或集合类型参数</summary><p id="9057247f-4eb5-4a41-a99b-69114ac687e6" class>1.传数组</p><pre id="94675f2b-338b-4057-913b-628d960c478b" class="code"><code>ProductController
//    数组
    @GetMapping(&quot;/arr&quot;)
    public String array(@RequestParam String [] ids){
        for (String id : ids) {
            System.out.println(id);
        }
        return &quot;arr:&quot;+ids;
    }
ProductClient
//  数组
    @GetMapping(&quot;/arr&quot;)
    String array(@RequestParam String [] ids);

CategoryController
//  数组
    @GetMapping(&quot;/arr&quot;)
    public String array(){
        String array = productClient.array(new String[]{&quot;11&quot;, &quot;22&quot;, &quot;33&quot;});
        System.out.println(array);
        return &quot;Array ok...&quot;;
    }</code></pre><p id="69a05d4f-7456-47e0-80c4-18a46f10759a" class>2.传集合</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="0e20a1c9-ca3f-4c07-a0b5-16558b7233b9"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">定义一个接口接受集合类型参数
springmvc:不能直接接受集合类型参数,如果想要接收集合类型参数必须将集合放入对象中,使用对象的方式接收才行
oo: oriented (面向) object(对象) 面向对象
vo(value object): 用来传递数据对象称之为值对象
dto: (data transfer (传输) object) :数据传输对象</div></figure><p id="dde63e5c-a7f3-4b50-840e-1c31fb2a9271" class>新建一个ov包CollectionOv.class</p><pre id="cec22a64-a151-4950-b7a7-fb93e100cf62" class="code"><code>import java.util.ArrayList;
import java.util.List;

public class CollectionVo {
    List&lt;String&gt; ids = new ArrayList&lt;String&gt;();

    public List&lt;String&gt; getIds() {
        return ids;
    }

    public void setIds(List&lt;String&gt; ids) {
        this.ids = ids;
    }
}</code></pre><p id="35e65a51-36f3-437b-afe0-be7bea14af36" class><mark class="highlight-red"><strong>ProductController</strong></mark></p><pre id="37c66075-9693-4f11-b3ee-44553967d8e1" class="code code-wrap"><code>//    集合
@GetMapping(&quot;/list&quot;)
public String list(CollectionVo collectionVo ){
    collectionVo.getIds().forEach(id-&gt; System.out.println(id));
return &quot;port:&quot;+port+&quot;&lt;br/&gt;   list:&quot;+ collectionVo.getIds();
}</code></pre><p id="60b27e7e-bb29-49c3-ae8e-f1c122bdf9bf" class><mark class="highlight-red"><strong>ProductClient</strong></mark></p><pre id="0309c224-7d6a-4309-bd63-026c5d1b20fe" class="code"><code>//    集合
    @GetMapping(&quot;/list&quot;)
    String list(@RequestParam(&quot;ids&quot;) String [] ids);</code></pre><p id="74f7131e-64c3-47c4-9d20-f2a09a512b9b" class><mark class="highlight-red"><strong>CategoryController</strong></mark></p><pre id="5695b6c9-5449-4eae-9ae0-25ae7ab5cab0" class="code code-wrap"><code>//    集合
@RequestMapping(&quot;/list&quot;)
public String list(){
    String listData = productClient.list(new String[]{&quot;11&quot;,&quot;22&quot;,&quot;33&quot;});
System.out.println(&quot;list&quot;+listData);
return &quot;List ok...&quot;+listData;
}</code></pre><figure id="57d9b295-27a1-4f1b-a89c-6f8bc1ec13dc" class="image"><a href="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled%205.png"><img style="width:187px" src="OpenFeign%20a7e3faa359ab4cb2bf5499ceb34382a0/Untitled%205.png"></a></figure></details></li></ul><h3 id="a0591a7e-d1c5-4c37-9ba7-59d2cc409851" class>响应处理</h3><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="8c439773-f8a6-49b1-a5fe-dc4440774819"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">自定义json反序列化  对象转为json序列化  字符串转对象
引入<mark class="highlight-teal"><strong>fastjson</strong></mark>依赖</div></figure><pre id="21fd275d-da45-4e0d-b5b3-66c7b830ed58" class="code"><code>&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
            &lt;version&gt;1.2.76&lt;/version&gt;
        &lt;/dependency&gt;</code></pre><ul id="972ceffe-b1b1-4ccd-884e-a6a95edc67eb" class="toggle"><li><details open><summary><strong>Code</strong></summary><p id="afd84901-e3fd-4559-aa92-d9631e46c5a9" class><mark class="highlight-red"><strong>ProductController</strong></mark></p><pre id="bb6d428f-a1aa-446a-9e9b-96921bd3f8bf" class="code"><code>@GetMapping(&quot;/productList&quot;)
    public Map&lt;String,Object&gt; findByIdAndPage(Integer page, Integer rows, Integer id){
        System.out.println(&quot;当前页：&quot;+page+&quot;   Rows:&quot;+rows+&quot;   id:&quot;+id);
        Map&lt;String,Object&gt; map = new HashMap&lt;String,Object&gt;();
        List&lt;Product&gt; products = new ArrayList&lt;&gt;();
        products.add(new Product(1,&quot;dkfj&quot;,23,null));
        products.add(new Product(2,&quot;qqq&quot;,32,null));
        products.add(new Product(3,&quot;eee&quot;,43,null));
        products.add(new Product(4,&quot;fff&quot;,21,null));
        int total = 1000;
        map.put(&quot;rows&quot;,products);
        map.put(&quot;total&quot;,total);

        return map;
    }</code></pre><p id="7db70c0e-e2c4-4f1e-a1fb-f785f08dbf3f" class><mark class="highlight-red"><strong>ProductClient</strong></mark></p><pre id="813963a5-8063-4cae-b2d3-ec0087a40655" class="code"><code>@GetMapping(&quot;/productList&quot;)
    String findByIdAndPage(
            @RequestParam(&quot;page&quot;) Integer page,
            @RequestParam(&quot;rows&quot;) Integer rows,
            @RequestParam(&quot;id&quot;) Integer id);</code></pre><p id="cbc626ed-f7ef-4955-b7c7-d97162f58633" class><mark class="highlight-red"><strong>CategoryController</strong></mark></p><pre id="6c161729-4e37-406e-8c0b-4d4b5a442cd9" class="code code-wrap"><code> @GetMapping(&quot;/map&quot;)
    public String objectMap(){
        String res = productClient.findByIdAndPage(5,1000,1);
System.out.println(res);
//      自定义json反序列化  对象转为json序列化  字符串转对象

        JSONObject jsonObject = JSONObject.parseObject(res);
Object rows = jsonObject.get(&quot;rows&quot;);
System.out.println(rows);

//二次json反序列化
        List&lt;Product&gt; products = jsonObject.parseArray(rows.toString(),Product.class);
products.forEach(product -&gt; {
            System.out.println(&quot;product:&quot;+product);
});
return res;
}</code></pre></details></li></ul><h3 id="273b5e55-d1df-486b-8e8e-5eaf4a64e5c9" class>细节</h3><ul id="41d04d08-93db-4c13-9e38-00713f3b9ed6" class="toggle"><li><details open><summary>1、默认超时</summary><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="3f444928-a72c-424d-83af-4d83e54e2ade"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">默认情况下,openFiegn在进行服务调用时,要求服务提供方处理业务逻辑时间必须在1S内返回,如果超过1S没有返回则OpenFeign会直接报错,不会等待服务执行,但是往往在处理复杂业务逻辑是可能会超过1S,因此需要修改OpenFeign的默认服务调用超时时间。</div></figure><p id="4edfbd75-abbb-4d23-a39b-89c4779cfa6b" class>修改OpenFeign默认超时时间</p><pre id="304dd4e3-395a-4e56-b02e-c87b6bec0751" class="code"><code>feign.client.config.PRODUCTS.connectTimeout=5000  		#配置指定服务连接超时
feign.client.config.PRODUCTS.readTimeout=5000		  	#配置指定服务等待超时
#feign.client.config.default.connectTimeout=5000  		#配置所有服务连接超时
#feign.client.config.default.readTimeout=5000			#配置所有服务等待超时</code></pre><p id="1d4c901c-5cb2-4d11-9645-c5e8b70da685" class>
</p><p id="7785794c-d232-4453-a67f-47404071c791" class>
</p></details></li></ul><ul id="fe1af2dd-28d9-49ff-bb10-02db035bcb0e" class="toggle"><li><details open><summary>2、日志</summary><ul id="6a9876a5-199a-440d-bc43-7d1062b6849f" class="bulleted-list"><li style="list-style-type:disc">往往在服务调用时我们需要详细展示feign的日志,默认feign在调用是并不是最详细日志输出,因此在调试程序时应该开启feign的详细日志展示。feign对日志的处理非常灵活可为每个feign客户端指定日志记录策略，每个客户端都会创建一个logger默认情况下logger的名称是feign的全限定名需要注意的是，feign日志的打印只会DEBUG级别做出响应。</li></ul><ul id="048103ab-5c3d-4ff7-8a26-66d33950d2bc" class="bulleted-list"><li style="list-style-type:disc">我们可以为feign客户端配置各自的logger.lever对象，告诉feign记录那些日志logger.lever有以下的几种值
<code>NONE 不记录任何日志</code>BASIC 仅仅记录请求方法，url，响应状态代码及执行时间
<code>HEADERS 记录Basic级别的基础上，记录请求和响应的header</code>FULL 记录请求和响应的header，body和元数据<p id="56d05c2e-640a-4287-8bdb-91b4ffc0e61c" class><mark class="highlight-purple"><strong>开启日志展示</strong></mark></p><pre id="9c2caf90-1679-4e85-a3fd-3f7d2eb0991a" class="code"><code>feign.client.config.PRODUCTS.loggerLevel=full  #开启指定服务日志展示
#feign.client.config.default.loggerLevel=full  #全局开启服务日志展示
logging.level.com.baizhi.feignclients=debug    #指定feign调用客户端对象所在包,必须是debug级别</code></pre></li></ul></details></li></ul><p id="d50a791b-64a6-4d9d-875a-cd70964e74ec" class>
</p></div></article><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":200,"height":350},"mobile":{"show":true},"log":false});</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":200,"height":350},"mobile":{"show":true},"log":false});</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":200,"height":350},"mobile":{"show":true},"log":false});</script></body></html>
        </section>
    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Yee Van | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
    <!--动态线条背景-->
    <script type="text/javascript"
        color="158,175,222" opacity='0.9' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
    </script>
    <script type="text/javascript" src="/js/love.js"></script>  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":200,"height":350},"mobile":{"show":true},"log":false});</script></body>   
</html>
